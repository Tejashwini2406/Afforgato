================================================================================
                    AFFORGATO COFFEE SHOP - ENTITY RELATIONSHIP DIAGRAM
================================================================================

ENTITY RELATIONSHIP OVERVIEW
================================================================================

This diagram represents the complete database schema for the Afforgato Coffee 
Shop application, showing all entities, their attributes, and relationships.

ENTITIES AND ATTRIBUTES
================================================================================

1. USERS (Primary Entity)
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ USERS                                                                   â”‚
   â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
   â”‚ â€¢ id (PK) - INT AUTO_INCREMENT                                          â”‚
   â”‚ â€¢ username (UK) - VARCHAR(80) UNIQUE NOT NULL                          â”‚
   â”‚ â€¢ email (UK) - VARCHAR(120) UNIQUE NOT NULL                            â”‚
   â”‚ â€¢ password_hash - VARCHAR(255) NOT NULL                                â”‚
   â”‚ â€¢ first_name - VARCHAR(50) NOT NULL                                    â”‚
   â”‚ â€¢ last_name - VARCHAR(50) NOT NULL                                     â”‚
   â”‚ â€¢ phone - VARCHAR(20)                                                  â”‚
   â”‚ â€¢ is_admin - BOOLEAN DEFAULT FALSE                                     â”‚
   â”‚ â€¢ is_active - BOOLEAN DEFAULT TRUE                                     â”‚
   â”‚ â€¢ created_at - TIMESTAMP DEFAULT CURRENT_TIMESTAMP                     â”‚
   â”‚ â€¢ updated_at - TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE           â”‚
   â”‚                                                                         â”‚
   â”‚ Computed Properties:                                                    â”‚
   â”‚ â€¢ full_name - Computed: first_name + last_name                         â”‚
   â”‚ â€¢ address - From default address relationship                          â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

2. USER_PROFILES (Normalized Profile Data)
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ USER_PROFILES                                                           â”‚
   â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
   â”‚ â€¢ id (PK) - INT AUTO_INCREMENT                                          â”‚
   â”‚ â€¢ user_id (FK) - INT NOT NULL â†’ USERS.id                               â”‚
   â”‚ â€¢ date_of_birth - DATE                                                 â”‚
   â”‚ â€¢ preferences - TEXT                                                   â”‚
   â”‚ â€¢ loyalty_points - INT DEFAULT 0                                       â”‚
   â”‚ â€¢ total_orders - INT DEFAULT 0                                         â”‚
   â”‚ â€¢ total_spent - DECIMAL(10,2) DEFAULT 0.00                            â”‚
   â”‚ â€¢ created_at - TIMESTAMP DEFAULT CURRENT_TIMESTAMP                     â”‚
   â”‚ â€¢ updated_at - TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE           â”‚
   â”‚                                                                         â”‚
   â”‚ Auto-created via trigger when user is created                          â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

3. ADDRESSES (Normalized Address Data)
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ ADDRESSES                                                               â”‚
   â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
   â”‚ â€¢ id (PK) - INT AUTO_INCREMENT                                          â”‚
   â”‚ â€¢ user_id (FK) - INT NOT NULL â†’ USERS.id                               â”‚
   â”‚ â€¢ address_type - ENUM('home', 'work', 'other') DEFAULT 'home'          â”‚
   â”‚ â€¢ street_address - TEXT NOT NULL                                       â”‚
   â”‚ â€¢ city - VARCHAR(100) NOT NULL                                         â”‚
   â”‚ â€¢ state - VARCHAR(100) NOT NULL                                        â”‚
   â”‚ â€¢ postal_code - VARCHAR(20) NOT NULL                                   â”‚
   â”‚ â€¢ country - VARCHAR(100) DEFAULT 'India'                               â”‚
   â”‚ â€¢ is_default - BOOLEAN DEFAULT FALSE                                   â”‚
   â”‚ â€¢ created_at - TIMESTAMP DEFAULT CURRENT_TIMESTAMP                     â”‚
   â”‚ â€¢ updated_at - TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE           â”‚
   â”‚                                                                         â”‚
   â”‚ Supports multiple addresses per user                                    â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

4. CATEGORIES (Menu Organization)
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ CATEGORIES                                                              â”‚
   â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
   â”‚ â€¢ id (PK) - INT AUTO_INCREMENT                                          â”‚
   â”‚ â€¢ name - VARCHAR(100) NOT NULL                                          â”‚
   â”‚ â€¢ description - TEXT                                                   â”‚
   â”‚ â€¢ emoji - VARCHAR(10)                                                  â”‚
   â”‚ â€¢ is_active - BOOLEAN DEFAULT TRUE                                     â”‚
   â”‚ â€¢ display_order - INT DEFAULT 0                                        â”‚
   â”‚ â€¢ created_at - TIMESTAMP DEFAULT CURRENT_TIMESTAMP                     â”‚
   â”‚ â€¢ updated_at - TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE           â”‚
   â”‚                                                                         â”‚
   â”‚ Examples: Hot Coffee â˜•, Cold Coffee ğŸ§Š, Tea ğŸµ, Pastries ğŸ¥          â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

5. MENU_ITEMS (Product Catalog)
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ MENU_ITEMS                                                              â”‚
   â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
   â”‚ â€¢ id (PK) - INT AUTO_INCREMENT                                          â”‚
   â”‚ â€¢ name - VARCHAR(100) NOT NULL                                          â”‚
   â”‚ â€¢ description - TEXT                                                   â”‚
   â”‚ â€¢ price - DECIMAL(8,2) NOT NULL                                        â”‚
   â”‚ â€¢ category_id (FK) - INT â†’ CATEGORIES.id                               â”‚
   â”‚ â€¢ emoji - VARCHAR(10)                                                  â”‚
   â”‚ â€¢ image_url - VARCHAR(255)                                             â”‚
   â”‚ â€¢ is_available - BOOLEAN DEFAULT TRUE                                  â”‚
   â”‚ â€¢ preparation_time - INT DEFAULT 5                                     â”‚
   â”‚ â€¢ calories - INT                                                       â”‚
   â”‚ â€¢ ingredients - TEXT                                                   â”‚
   â”‚ â€¢ allergens - TEXT                                                     â”‚
   â”‚ â€¢ created_at - TIMESTAMP DEFAULT CURRENT_TIMESTAMP                     â”‚
   â”‚ â€¢ updated_at - TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE           â”‚
   â”‚                                                                         â”‚
   â”‚ 21 items across 6 categories with Indian Rupee pricing                 â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

6. ORDERS (Transaction Records)
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ ORDERS                                                                  â”‚
   â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
   â”‚ â€¢ id (PK) - INT AUTO_INCREMENT                                          â”‚
   â”‚ â€¢ user_id (FK) - INT NOT NULL â†’ USERS.id                               â”‚
   â”‚ â€¢ order_number (UK) - VARCHAR(20) UNIQUE                               â”‚
   â”‚ â€¢ subtotal - DECIMAL(10,2) NOT NULL                                    â”‚
   â”‚ â€¢ tax_amount - DECIMAL(10,2) DEFAULT 0.00                              â”‚
   â”‚ â€¢ total_amount - DECIMAL(10,2) NOT NULL                                â”‚
   â”‚ â€¢ status - ENUM('pending', 'confirmed', 'preparing', 'ready',          â”‚
   â”‚           'delivered', 'cancelled') DEFAULT 'pending'                  â”‚
   â”‚ â€¢ payment_method - ENUM('cash', 'card', 'upi', 'wallet')               â”‚
   â”‚ â€¢ payment_status - ENUM('pending', 'paid', 'failed', 'refunded')       â”‚
   â”‚ â€¢ delivery_address - TEXT                                              â”‚
   â”‚ â€¢ special_instructions - TEXT                                          â”‚
   â”‚ â€¢ notes - TEXT                                                         â”‚
   â”‚ â€¢ estimated_delivery - TIMESTAMP NULL                                  â”‚
   â”‚ â€¢ delivered_at - TIMESTAMP NULL                                        â”‚
   â”‚ â€¢ created_at - TIMESTAMP DEFAULT CURRENT_TIMESTAMP                     â”‚
   â”‚ â€¢ updated_at - TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE           â”‚
   â”‚                                                                         â”‚
   â”‚ Complete order lifecycle management                                     â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

7. ORDER_ITEMS (Order Line Items)
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ ORDER_ITEMS                                                             â”‚
   â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
   â”‚ â€¢ id (PK) - INT AUTO_INCREMENT                                          â”‚
   â”‚ â€¢ order_id (FK) - INT NOT NULL â†’ ORDERS.id                             â”‚
   â”‚ â€¢ menu_item_id (FK) - INT NOT NULL â†’ MENU_ITEMS.id                     â”‚
   â”‚ â€¢ quantity - INT NOT NULL DEFAULT 1                                    â”‚
   â”‚ â€¢ price - DECIMAL(8,2) NOT NULL                                        â”‚
   â”‚ â€¢ subtotal - DECIMAL(10,2) GENERATED AS (quantity * price) STORED      â”‚
   â”‚ â€¢ special_requests - TEXT                                              â”‚
   â”‚ â€¢ created_at - TIMESTAMP DEFAULT CURRENT_TIMESTAMP                     â”‚
   â”‚                                                                         â”‚
   â”‚ Computed subtotal for automatic calculation                             â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

8. CART (Shopping Cart)
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ CART                                                                    â”‚
   â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
   â”‚ â€¢ id (PK) - INT AUTO_INCREMENT                                          â”‚
   â”‚ â€¢ user_id (FK) - INT NOT NULL â†’ USERS.id                               â”‚
   â”‚ â€¢ menu_item_id (FK) - INT NOT NULL â†’ MENU_ITEMS.id                     â”‚
   â”‚ â€¢ quantity - INT NOT NULL DEFAULT 1                                    â”‚
   â”‚ â€¢ created_at - TIMESTAMP DEFAULT CURRENT_TIMESTAMP                     â”‚
   â”‚ â€¢ updated_at - TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE           â”‚
   â”‚                                                                         â”‚
   â”‚ UNIQUE KEY: unique_user_item (user_id, menu_item_id)                   â”‚
   â”‚ Temporary storage before order placement                                â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

9. AUDIT_LOG (System Audit Trail)
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ AUDIT_LOG                                                               â”‚
   â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
   â”‚ â€¢ id (PK) - INT AUTO_INCREMENT                                          â”‚
   â”‚ â€¢ table_name - VARCHAR(50) NOT NULL                                    â”‚
   â”‚ â€¢ operation - ENUM('INSERT', 'UPDATE', 'DELETE') NOT NULL              â”‚
   â”‚ â€¢ record_id - INT NOT NULL                                             â”‚
   â”‚ â€¢ old_values - JSON                                                    â”‚
   â”‚ â€¢ new_values - JSON                                                    â”‚
   â”‚ â€¢ user_id (FK) - INT â†’ USERS.id                                        â”‚
   â”‚ â€¢ timestamp - TIMESTAMP DEFAULT CURRENT_TIMESTAMP                      â”‚
   â”‚                                                                         â”‚
   â”‚ Automatic audit trail via triggers                                     â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

10. INVENTORY_LOG (Stock Movement Tracking)
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ INVENTORY_LOG                                                           â”‚
    â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
    â”‚ â€¢ id (PK) - INT AUTO_INCREMENT                                          â”‚
    â”‚ â€¢ menu_item_id (FK) - INT NOT NULL â†’ MENU_ITEMS.id                     â”‚
    â”‚ â€¢ change_type - ENUM('order_placed', 'order_cancelled',                â”‚
    â”‚                'manual_adjustment') NOT NULL                           â”‚
    â”‚ â€¢ quantity_change - INT NOT NULL                                       â”‚
    â”‚ â€¢ reference_id - INT                                                   â”‚
    â”‚ â€¢ notes - TEXT                                                         â”‚
    â”‚ â€¢ created_at - TIMESTAMP DEFAULT CURRENT_TIMESTAMP                     â”‚
    â”‚                                                                         â”‚
    â”‚ Automatic inventory tracking via triggers                              â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

RELATIONSHIPS
================================================================================

PRIMARY RELATIONSHIPS:

1. USERS â†’ USER_PROFILES (1:1)
   - Each user has exactly one profile
   - Auto-created via trigger
   - CASCADE DELETE

2. USERS â†’ ADDRESSES (1:Many)
   - Users can have multiple addresses
   - One default address per user
   - CASCADE DELETE

3. USERS â†’ ORDERS (1:Many)
   - Users can place multiple orders
   - CASCADE DELETE

4. USERS â†’ CART (1:Many)
   - Users can have multiple cart items
   - CASCADE DELETE

5. CATEGORIES â†’ MENU_ITEMS (1:Many)
   - Categories contain multiple menu items
   - SET NULL on category deletion

6. ORDERS â†’ ORDER_ITEMS (1:Many)
   - Orders contain multiple line items
   - CASCADE DELETE

7. MENU_ITEMS â†’ ORDER_ITEMS (1:Many)
   - Menu items can be in multiple orders
   - CASCADE DELETE

8. MENU_ITEMS â†’ CART (1:Many)
   - Menu items can be in multiple carts
   - CASCADE DELETE

AUDIT & TRACKING RELATIONSHIPS:

9. USERS â†’ AUDIT_LOG (1:Many)
   - Track user activities
   - SET NULL on user deletion

10. MENU_ITEMS â†’ INVENTORY_LOG (1:Many)
    - Track inventory changes
    - CASCADE DELETE

RELATIONSHIP CARDINALITIES:
================================================================================

USERS (1) â†â†’ (1) USER_PROFILES
USERS (1) â†â†’ (0..n) ADDRESSES
USERS (1) â†â†’ (0..n) ORDERS
USERS (1) â†â†’ (0..n) CART
USERS (1) â†â†’ (0..n) AUDIT_LOG

CATEGORIES (1) â†â†’ (0..n) MENU_ITEMS

MENU_ITEMS (1) â†â†’ (0..n) ORDER_ITEMS
MENU_ITEMS (1) â†â†’ (0..n) CART
MENU_ITEMS (1) â†â†’ (0..n) INVENTORY_LOG

ORDERS (1) â†â†’ (1..n) ORDER_ITEMS

BUSINESS RULES ENFORCED:
================================================================================

1. Data Integrity:
   - All foreign keys enforced
   - Unique constraints on usernames, emails, order numbers
   - NOT NULL constraints on essential fields

2. Business Logic:
   - User profiles auto-created via triggers
   - Inventory automatically tracked via triggers
   - Order changes audited automatically

3. Data Validation:
   - Enum constraints for status fields
   - Price and quantity must be positive
   - Email format validation at application level

4. Security:
   - Password hashing enforced
   - Admin privileges controlled
   - Audit trail for compliance

NORMALIZATION LEVEL:
================================================================================

The database follows Third Normal Form (3NF):
- 1NF: All attributes are atomic
- 2NF: No partial dependencies
- 3NF: No transitive dependencies

Key normalization decisions:
- User addresses separated into ADDRESSES table
- User profile data separated into USER_PROFILES table
- Order items normalized into separate table
- Categories separated from menu items

This design eliminates data redundancy while maintaining referential integrity
and supporting efficient queries for the coffee shop business operations.

================================================================================
                                END OF ER DIAGRAM
================================================================================
